# -*- coding: utf-8 -*-
"""Best_model

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1DUxt8a0fvqjV4AS5Umg1Y29cp0UJKyOa
"""

import streamlit as st
import numpy as np
import joblib

# Cargar el modelo entrenado (XGBoost)
best_model = joblib.load("best_model.pkl")

# Umbral Ã³ptimo definido
THRESHOLD = 0.6207  # Cambia si usaste otro threshold Ã³ptimo

# TÃ­tulo de la app
st.title("ğŸ” DetecciÃ³n de Fraude en Tarjetas de CrÃ©dito")
st.write("Ingrese los valores de una transacciÃ³n (PCA) para evaluar si es potencialmente fraudulenta.")

# Crear formulario de entrada con 30 features (PCA transformados)
input_values = []
for i in range(30):
    value = st.number_input(f"PC{i+1}", step=0.01, format="%.4f")
    input_values.append(value)

# BotÃ³n de predicciÃ³n
if st.button("ğŸ“Š Evaluar transacciÃ³n"):
    input_array = np.array(input_values).reshape(1, -1)
    prob = best_model.predict_proba(input_array)[0][1]

    st.write(f"ğŸ“ˆ Probabilidad de fraude: **{prob:.4f}**")

    if prob >= THRESHOLD:
        st.error("âš ï¸ Â¡Fraude detectado!")
    else:
        st.success("âœ… TransacciÃ³n normal")